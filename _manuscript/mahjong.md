---
title: 算法题：如何判断一副麻将胡了
tags: 算法
---

**介绍：**
麻将是一种人们喜闻乐见的日常娱乐活动，受中国地大物博的影响，不同地区的麻将规则都有点不同，这里介绍一种比较简单的规则，首先是花色只有筒、条、万三种，数字从 1 到 9，每种牌有四个，所以总共有 3 * 9 * 4 = 108 张牌。
判断胡牌的规则如下：
1. 总共14张牌；
2. 必须有一对相同的牌；
3. 剩下12张牌分成 4 组，其中每组必须相同或者数字连续（花色相同）。

**问题：**
设计程序自动判断是否胡牌。

**思路：**

首先，我们忽略花色的影响，只考虑数字 1~9，为了判断手牌是否符合规则，我们需要将 14 张牌分为 5 组，数量分别为 2,3,3,3,3，然后逐一检查。从组合数学上来讲，这里的分组方案有 \(C_{14}^2 C_{12}^3 C_{9}^3 C_6^3 C_3^3\) 种，暴力计算方法就是列出所有这些方案并逐一排查。但是考虑到14张牌中有相同的数字，并且规则中满足条件的牌组其数字都是接近的，于是我们可以先对手牌从小到大排序，这样在分组的时候不必调换它们的顺序。于是这时的分组方案数量就是在不调换顺序的情况下的组合方案数量，共有一下几种情况：
1. 2 3 3 3 3
2. 3 2 3 3 3
3. 3 3 2 3 3
4. 3 3 3 2 3
5. 3 3 3 3 2

然后再逐一检查每组方案是否胡牌即可。最后回到多种花色的条件下，此时只需要在排序的时候将相同花色的牌放在一起，其他步骤与纯数字牌情况相同。




